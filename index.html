<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モバイル完全対応版 - リアルタイム翻訳アプリ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .recording-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .mobile-button {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .info-card {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.9);
        }
        .translation-history {
            max-height: 300px;
            overflow-y: auto;
        }
        .speech-unavailable {
            background: linear-gradient(45deg, #fef3c7, #fbbf24);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-6xl">
        <!-- ヘッダー -->
        <div class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">
                <i class="fas fa-language text-blue-500"></i>
                モバイル対応 翻訳アプリ
            </h1>
            <p class="text-gray-600 text-sm md:text-base">音声認識・翻訳・関連情報を一つのアプリで</p>
        </div>

        <!-- ブラウザ対応状況表示 -->
        <div id="browserSupport" class="mb-4 p-3 rounded-lg text-sm text-center hidden">
        </div>

        <!-- メイン操作パネル -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
            <!-- 音声認識パネル -->
            <div class="bg-white rounded-lg shadow-lg p-4">
                <h3 class="text-lg font-semibold mb-3 text-center">
                    <i class="fas fa-microphone text-red-500"></i>
                    音声認識
                </h3>
                
                <!-- 音声認識ボタン -->
                <div class="text-center mb-4">
                    <button id="toggleRecording" class="mobile-button bg-red-500 hover:bg-red-600 text-white rounded-full p-4 md:p-6 text-xl md:text-2xl transition-all duration-300 shadow-lg">
                        <i id="micIcon" class="fas fa-microphone"></i>
                    </button>
                    <div id="recordingStatus" class="mt-2 text-sm font-medium text-gray-600">
                        音声認識停止中
                    </div>
                </div>

                <!-- 手動入力（フォールバック） -->
                <div class="border-t pt-3">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        手動入力（音声認識の代替）
                    </label>
                    <textarea id="manualInput" 
                              placeholder="翻訳したいテキストを入力してください..." 
                              class="w-full p-3 border border-gray-300 rounded-lg resize-none text-sm"
                              rows="3"></textarea>
                    <button id="translateManual" class="mobile-button w-full mt-2 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium">
                        <i class="fas fa-language mr-1"></i>
                        手動翻訳
                    </button>
                </div>

                <!-- 認識されたテキスト -->
                <div class="border-t pt-3 mt-3">
                    <label class="block text-sm font-medium text-gray-700 mb-2">認識結果</label>
                    <div id="recognizedText" class="bg-gray-50 p-3 rounded-lg min-h-16 text-sm">
                        音声認識結果がここに表示されます
                    </div>
                </div>
            </div>

            <!-- 翻訳結果パネル -->
            <div class="bg-white rounded-lg shadow-lg p-4">
                <h3 class="text-lg font-semibold mb-3 text-center">
                    <i class="fas fa-exchange-alt text-green-500"></i>
                    翻訳結果
                </h3>
                
                <!-- 言語方向表示 -->
                <div class="text-center mb-3">
                    <span id="languageDirection" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                        日本語 ⇄ 英語
                    </span>
                </div>

                <!-- 現在の翻訳 -->
                <div class="bg-green-50 p-4 rounded-lg mb-4 min-h-24">
                    <div id="currentTranslation" class="text-gray-600 text-center">
                        翻訳結果がここに表示されます
                    </div>
                </div>

                <!-- 翻訳履歴 -->
                <div class="border-t pt-3">
                    <div class="flex justify-between items-center mb-2">
                        <label class="text-sm font-medium text-gray-700">翻訳履歴</label>
                        <button id="clearHistory" class="text-xs text-red-500 hover:text-red-700 mobile-button">
                            <i class="fas fa-trash mr-1"></i>クリア
                        </button>
                    </div>
                    <div id="translationHistory" class="translation-history bg-gray-50 p-3 rounded-lg">
                        <p class="text-gray-500 text-sm text-center">翻訳履歴がここに表示されます</p>
                    </div>
                </div>
            </div>

            <!-- 関連情報パネル -->
            <div class="bg-white rounded-lg shadow-lg p-4">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-lg font-semibold">
                        <i class="fas fa-info-circle text-purple-500"></i>
                        関連情報
                    </h3>
                    <button id="refreshInfo" class="mobile-button text-sm text-blue-500 hover:text-blue-700">
                        <i class="fas fa-sync-alt mr-1"></i>更新
                    </button>
                </div>

                <!-- タイマー表示 -->
                <div class="text-center mb-3">
                    <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">
                        次の更新まで: <span id="infoTimer">30</span>秒
                    </span>
                </div>

                <!-- 情報表示エリア -->
                <div id="relatedInfo" class="info-card p-4 rounded-lg min-h-48 text-sm">
                    <div class="text-center text-gray-500">
                        <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                        <p>関連情報を取得中...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 統計情報 -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-lg shadow p-4 text-center">
                <div class="text-2xl font-bold text-blue-500" id="translationCount">0</div>
                <div class="text-sm text-gray-600">翻訳回数</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4 text-center">
                <div class="text-2xl font-bold text-green-500" id="sessionTime">0:00</div>
                <div class="text-sm text-gray-600">セッション時間</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4 text-center">
                <div class="text-2xl font-bold text-purple-500" id="infoCount">0</div>
                <div class="text-sm text-gray-600">情報表示回数</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4 text-center">
                <div class="text-2xl font-bold text-orange-500" id="currentLang">---</div>
                <div class="text-sm text-gray-600">検出言語</div>
            </div>
        </div>

        <!-- フッター -->
        <div class="text-center text-sm text-gray-500">
            <p>
                <i class="fas fa-mobile-alt mr-1"></i>
                モバイル最適化版 | 
                <i class="fas fa-shield-alt mr-1"></i>
                プライバシー保護
            </p>
        </div>
    </div>

    <script>
        class MobileTranslationApp {
            constructor() {
                this.recognition = null;
                this.isRecording = false;
                this.translationCount = 0;
                this.infoCount = 0;
                this.sessionStartTime = Date.now();
                this.infoTimer = 30;
                this.infoTimerInterval = null;
                this.currentLanguage = 'unknown';
                this.translationHistory = [];
                
                this.initializeApp();
                this.setupEventListeners();
                this.startInfoTimer();
                this.updateSessionTime();
                this.checkBrowserSupport();
                this.loadInitialInfo();
            }

            checkBrowserSupport() {
                const supportDiv = document.getElementById('browserSupport');
                const isHTTPS = location.protocol === 'https:' || location.hostname === 'localhost';
                const hasSpeechRecognition = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
                
                let message = '';
                let className = '';
                
                if (!isHTTPS) {
                    message = '⚠️ HTTPS接続が必要です。音声認識には手動入力をご利用ください。';
                    className = 'speech-unavailable';
                } else if (!hasSpeechRecognition) {
                    message = '⚠️ このブラウザは音声認識に対応していません。手動入力をご利用ください。';
                    className = 'speech-unavailable';
                } else {
                    message = '✅ 音声認識とすべての機能が利用可能です。';
                    className = 'bg-green-100 text-green-800';
                }
                
                supportDiv.textContent = message;
                supportDiv.className = `mb-4 p-3 rounded-lg text-sm text-center ${className}`;
                supportDiv.classList.remove('hidden');
            }

            initializeApp() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = true;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'ja-JP';
                    
                    this.recognition.onstart = () => {
                        this.isRecording = true;
                        this.updateRecordingStatus();
                    };
                    
                    this.recognition.onresult = (event) => {
                        let finalTranscript = '';
                        let interimTranscript = '';
                        
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            const transcript = event.results[i][0].transcript;
                            if (event.results[i].isFinal) {
                                finalTranscript += transcript;
                            } else {
                                interimTranscript += transcript;
                            }
                        }
                        
                        const recognizedText = document.getElementById('recognizedText');
                        recognizedText.innerHTML = finalTranscript + '<span style="color: #888;">' + interimTranscript + '</span>';
                        
                        if (finalTranscript) {
                            this.translateText(finalTranscript);
                        }
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('音声認識エラー:', event.error);
                        this.isRecording = false;
                        this.updateRecordingStatus();
                        
                        let errorMessage = '音声認識エラーが発生しました。';
                        switch(event.error) {
                            case 'not-allowed':
                                errorMessage = 'マイクアクセスが拒否されました。ブラウザ設定を確認してください。';
                                break;
                            case 'no-speech':
                                errorMessage = '音声が検出されませんでした。';
                                break;
                            case 'audio-capture':
                                errorMessage = 'オーディオキャプチャエラー。マイクを確認してください。';
                                break;
                            case 'network':
                                errorMessage = 'ネットワークエラー。インターネット接続を確認してください。';
                                break;
                        }
                        
                        document.getElementById('recognizedText').innerHTML = 
                            `<span style="color: #ef4444;">${errorMessage}<br>手動入力をご利用ください。</span>`;
                    };
                    
                    this.recognition.onend = () => {
                        this.isRecording = false;
                        this.updateRecordingStatus();
                    };
                }
            }

            setupEventListeners() {
                // 音声認識トグル
                document.getElementById('toggleRecording').addEventListener('click', () => {
                    this.toggleRecording();
                });
                
                // 手動翻訳
                document.getElementById('translateManual').addEventListener('click', () => {
                    const text = document.getElementById('manualInput').value.trim();
                    if (text) {
                        document.getElementById('recognizedText').textContent = text;
                        this.translateText(text);
                        document.getElementById('manualInput').value = '';
                    }
                });
                
                // 履歴クリア
                document.getElementById('clearHistory').addEventListener('click', () => {
                    this.clearTranslationHistory();
                });
                
                // 情報更新
                document.getElementById('refreshInfo').addEventListener('click', () => {
                    this.loadRelatedInfo();
                });
                
                // Enterキーで手動翻訳
                document.getElementById('manualInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        document.getElementById('translateManual').click();
                    }
                });
            }

            toggleRecording() {
                if (!this.recognition) {
                    alert('このブラウザは音声認識に対応していません。手動入力をご利用ください。');
                    return;
                }
                
                if (this.isRecording) {
                    this.recognition.stop();
                } else {
                    try {
                        this.recognition.start();
                    } catch (error) {
                        console.error('音声認識開始エラー:', error);
                        alert('音声認識を開始できませんでした。手動入力をご利用ください。');
                    }
                }
            }

            updateRecordingStatus() {
                const button = document.getElementById('toggleRecording');
                const icon = document.getElementById('micIcon');
                const status = document.getElementById('recordingStatus');
                
                if (this.isRecording) {
                    button.className = 'mobile-button bg-red-500 text-white rounded-full p-4 md:p-6 text-xl md:text-2xl recording-pulse shadow-lg';
                    icon.className = 'fas fa-stop';
                    status.textContent = '🎤 録音中... (タップで停止)';
                    status.className = 'mt-2 text-sm font-medium text-red-600';
                } else {
                    button.className = 'mobile-button bg-red-500 hover:bg-red-600 text-white rounded-full p-4 md:p-6 text-xl md:text-2xl transition-all duration-300 shadow-lg';
                    icon.className = 'fas fa-microphone';
                    status.textContent = '🎤 音声認識停止中 (タップで開始)';
                    status.className = 'mt-2 text-sm font-medium text-gray-600';
                }
            }

            async translateText(text) {
                if (!text.trim()) return;
                
                try {
                    // 言語検出
                    const detectedLang = this.detectLanguage(text);
                    this.currentLanguage = detectedLang;
                    document.getElementById('currentLang').textContent = detectedLang === 'ja' ? '日本語' : '英語';
                    
                    // 翻訳実行
                    const translatedText = await this.performTranslation(text, detectedLang);
                    
                    // 結果表示
                    document.getElementById('currentTranslation').textContent = translatedText;
                    
                    // 履歴追加
                    this.addToHistory(text, translatedText, detectedLang);
                    
                    // 統計更新
                    this.translationCount++;
                    document.getElementById('translationCount').textContent = this.translationCount;
                    
                    // 関連情報の更新をトリガー
                    this.loadRelatedInfo(text);
                    
                } catch (error) {
                    console.error('翻訳エラー:', error);
                    document.getElementById('currentTranslation').innerHTML = 
                        '<span style="color: #ef4444;">翻訳エラーが発生しました。再度お試しください。</span>';
                }
            }

            detectLanguage(text) {
                // 簡易言語検出（日本語文字が含まれているかチェック）
                const japaneseRegex = /[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/;
                return japaneseRegex.test(text) ? 'ja' : 'en';
            }

            async performTranslation(text, sourceLang) {
                const targetLang = sourceLang === 'ja' ? 'en' : 'ja';
                
                // 複数の翻訳方法を試行
                const translationMethods = [
                    () => this.translateWithMyMemory(text, sourceLang, targetLang),
                    () => this.translateWithLibreTranslate(text, sourceLang, targetLang),
                    () => this.basicTranslate(text, sourceLang, targetLang)
                ];
                
                for (const method of translationMethods) {
                    try {
                        const result = await method();
                        if (result && result.trim()) {
                            return result;
                        }
                    } catch (error) {
                        console.warn('翻訳方法の一つが失敗:', error);
                    }
                }
                
                return this.basicTranslate(text, sourceLang, targetLang);
            }

            async translateWithMyMemory(text, sourceLang, targetLang) {
                const langPair = `${sourceLang}|${targetLang}`;
                const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${langPair}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.responseStatus === 200) {
                    return data.responseData.translatedText;
                }
                throw new Error('MyMemory translation failed');
            }

            async translateWithLibreTranslate(text, sourceLang, targetLang) {
                // LibreTranslateの無料APIを使用（制限あり）
                const url = 'https://libretranslate.com/translate';
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text,
                        source: sourceLang,
                        target: targetLang,
                        format: 'text'
                    })
                });
                
                const data = await response.json();
                if (data.translatedText) {
                    return data.translatedText;
                }
                throw new Error('LibreTranslate translation failed');
            }

            basicTranslate(text, sourceLang, targetLang) {
                // 基本的な辞書ベース翻訳（フォールバック）
                const basicDict = {
                    'ja': {
                        'こんにちは': 'Hello',
                        'おはよう': 'Good morning',
                        'こんばんは': 'Good evening',
                        'ありがとう': 'Thank you',
                        'すみません': 'Excuse me',
                        'はじめまして': 'Nice to meet you',
                        '今日': 'today',
                        '天気': 'weather',
                        '仕事': 'work',
                        '勉強': 'study'
                    },
                    'en': {
                        'hello': 'こんにちは',
                        'good morning': 'おはようございます',
                        'good evening': 'こんばんは',
                        'thank you': 'ありがとうございます',
                        'excuse me': 'すみません',
                        'nice to meet you': 'はじめまして',
                        'today': '今日',
                        'weather': '天気',
                        'work': '仕事',
                        'study': '勉強'
                    }
                };
                
                const dict = basicDict[sourceLang] || {};
                const lowerText = text.toLowerCase();
                
                for (const [key, value] of Object.entries(dict)) {
                    if (lowerText.includes(key.toLowerCase())) {
                        return value;
                    }
                }
                
                return `[翻訳: ${text}]`;
            }

            addToHistory(original, translated, sourceLang) {
                const history = document.getElementById('translationHistory');
                const timestamp = new Date().toLocaleTimeString('ja-JP', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                const historyItem = document.createElement('div');
                historyItem.className = 'mb-2 p-2 bg-white rounded border-l-4 border-blue-400';
                historyItem.innerHTML = `
                    <div class="text-xs text-gray-500 mb-1">${timestamp} | ${sourceLang === 'ja' ? '日→英' : '英→日'}</div>
                    <div class="text-sm mb-1"><strong>原文:</strong> ${original}</div>
                    <div class="text-sm"><strong>翻訳:</strong> ${translated}</div>
                `;
                
                if (history.children.length === 1 && history.children[0].textContent.includes('翻訳履歴がここに')) {
                    history.innerHTML = '';
                }
                
                history.insertBefore(historyItem, history.firstChild);
                
                // 履歴を10件に制限
                while (history.children.length > 10) {
                    history.removeChild(history.lastChild);
                }
                
                this.translationHistory.push({
                    original,
                    translated,
                    sourceLang,
                    timestamp: new Date()
                });
            }

            clearTranslationHistory() {
                document.getElementById('translationHistory').innerHTML = 
                    '<p class="text-gray-500 text-sm text-center">翻訳履歴がここに表示されます</p>';
                this.translationHistory = [];
            }

            async loadRelatedInfo(context = null) {
                const infoDiv = document.getElementById('relatedInfo');
                infoDiv.innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin text-2xl mb-2"></i><p>情報を取得中...</p></div>';
                
                try {
                    let info;
                    if (context) {
                        info = await this.getContextRelatedInfo(context);
                    } else {
                        info = await this.getITTrendInfo();
                    }
                    
                    infoDiv.innerHTML = info;
                    this.infoCount++;
                    document.getElementById('infoCount').textContent = this.infoCount;
                    
                } catch (error) {
                    console.error('情報取得エラー:', error);
                    infoDiv.innerHTML = '<div class="text-center text-gray-500"><i class="fas fa-exclamation-triangle mb-2"></i><p>情報の取得に失敗しました</p></div>';
                }
            }

            async getContextRelatedInfo(context) {
                // コンテキストに基づく関連情報の生成
                const keywords = this.extractKeywords(context);
                
                if (keywords.length > 0) {
                    return this.generateRelatedInfo(keywords[0]);
                }
                
                return await this.getITTrendInfo();
            }

            extractKeywords(text) {
                const commonWords = ['です', 'ます', 'した', 'する', 'ある', 'いる', 'の', 'に', 'を', 'は', 'が', 'で', 'と', 'から', 'まで', 'a', 'an', 'the', 'is', 'are', 'was', 'were', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by'];
                const words = text.toLowerCase().split(/\s+/).filter(word => 
                    word.length > 2 && !commonWords.includes(word)
                );
                return [...new Set(words)].slice(0, 3);
            }

            generateRelatedInfo(keyword) {
                const infoDatabase = {
                    '天気': {
                        title: '天気に関する雑学',
                        content: '雲の種類は基本的に10種類に分類され、それぞれ異なる高度に形成されます。積雲は良い天気の象徴ですが、積乱雲は激しい雷雨をもたらすことがあります。',
                        category: '自然科学'
                    },
                    '仕事': {
                        title: 'リモートワークのトレンド',
                        content: '2024年現在、世界の約35%の企業がハイブリッドワークを採用。生産性向上と従業員満足度の両面でメリットが報告されています。',
                        category: 'ビジネス'
                    },
                    'weather': {
                        title: 'Weather Facts',
                        content: 'Did you know that lightning strikes the Earth about 100 times per second? That\'s roughly 8.6 million times per day worldwide!',
                        category: 'Science'
                    },
                    'work': {
                        title: 'Future of Work',
                        content: 'AI and automation are expected to create 97 million new jobs by 2025, while transforming existing roles across industries.',
                        category: 'Technology'
                    }
                };
                
                const info = infoDatabase[keyword] || this.getRandomITInfo();
                
                return `
                    <div class="mb-3">
                        <span class="inline-block bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-medium">
                            ${info.category}
                        </span>
                    </div>
                    <h4 class="font-semibold text-gray-800 mb-2">${info.title}</h4>
                    <p class="text-gray-600 leading-relaxed">${info.content}</p>
                `;
            }

            async getITTrendInfo() {
                const trends = [
                    {
                        title: 'AI開発の最新動向',
                        content: 'ChatGPT-4、Claude、Geminiなどの大規模言語モデルが急速に進化。2024年は特にマルチモーダルAI（テキスト、画像、音声を統合処理）が注目されています。',
                        category: 'AI技術'
                    },
                    {
                        title: 'Web3とブロックチェーン',
                        content: '分散型アプリケーション（DApps）の実用化が進む中、イーサリアムの環境負荷軽減やLayer2ソリューションが普及。NFTから実用的なユースケースへシフト。',
                        category: 'ブロックチェーン'
                    },
                    {
                        title: 'クラウドネイティブ技術',
                        content: 'Kubernetes、Docker、マイクロサービスアーキテクチャが標準化。AWS、Azure、GCPが提供するサーバーレス技術も企業導入が加速。',
                        category: 'クラウド'
                    },
                    {
                        title: 'プログラミング言語トレンド',
                        content: 'Rust、Go、TypeScriptの人気が上昇。Pythonは依然としてAI/ML分野で圧倒的シェア。WebAssembly（WASM）による高性能Web開発も注目。',
                        category: '開発言語'
                    },
                    {
                        title: 'サイバーセキュリティ',
                        content: 'ゼロトラストセキュリティモデルが主流に。AIを活用した脅威検出システムと、量子コンピュータ時代に備えた暗号技術の研究が進行中。',
                        category: 'セキュリティ'
                    },
                    {
                        title: 'EdTech（教育技術）',
                        content: 'VR/AR技術を活用した没入型学習体験、AIパーソナル家庭教師、ブロックチェーン証明書システムなど、教育のデジタル変革が加速。',
                        category: '教育技術'
                    }
                ];
                
                const randomTrend = trends[Math.floor(Math.random() * trends.length)];
                
                return `
                    <div class="mb-3">
                        <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">
                            ${randomTrend.category}
                        </span>
                    </div>
                    <h4 class="font-semibold text-gray-800 mb-2">${randomTrend.title}</h4>
                    <p class="text-gray-600 leading-relaxed">${randomTrend.content}</p>
                    <div class="mt-3 pt-3 border-t border-gray-200">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-clock mr-1"></i>
                            最新のIT業界トレンド情報
                        </p>
                    </div>
                `;
            }

            getRandomITInfo() {
                const infos = [
                    {
                        title: 'プログラミング豆知識',
                        content: '世界初のプログラマーはエイダ・ラブレース（1843年）とされ、彼女はチャールズ・バベッジの解析エンジン用のプログラムを作成しました。',
                        category: 'プログラミング史'
                    },
                    {
                        title: 'インターネットの歴史',
                        content: '最初のウェブサイトは1991年にCERNで公開され、今でもhttp://info.cern.ch/hypertext/WWW/TheProject.htmlでアクセス可能です。',
                        category: 'Web歴史'
                    },
                    {
                        title: '量子コンピュータ',
                        content: '量子ビット（qubit）は0と1の状態を同時に持つことができ、従来のコンピュータでは数百万年かかる計算を数分で解ける可能性があります。',
                        category: '次世代技術'
                    }
                ];
                
                return infos[Math.floor(Math.random() * infos.length)];
            }

            startInfoTimer() {
                this.infoTimerInterval = setInterval(() => {
                    this.infoTimer--;
                    document.getElementById('infoTimer').textContent = this.infoTimer;
                    
                    if (this.infoTimer <= 0) {
                        this.loadRelatedInfo();
                        this.infoTimer = 30;
                    }
                }, 1000);
            }

            updateSessionTime() {
                setInterval(() => {
                    const elapsed = Math.floor((Date.now() - this.sessionStartTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    document.getElementById('sessionTime').textContent = 
                        `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }

            loadInitialInfo() {
                this.loadRelatedInfo();
            }
        }

        // アプリケーション開始
        document.addEventListener('DOMContentLoaded', () => {
            new MobileTranslationApp();
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDnExmXC%2BNqHNDgFhaAE43dibyCRTLwyvweq2spXfoPUHbWVMsxhcK3s8C%2B69AUjK5h2S1zJrFN%2BtHtIOP0kNdwUVyzyqhl2b6xwGqULrDXveoKtB6Yl1Z8ZnZsH%2BcGfJxB%2F8VtfqmYmWmnyQYSZ0e31nsssNI3vvfMSWTI3fZaAYEi%2B4bi3zmMYJSybZkePO1wjSc7z3rJqXzvfqUeJhT7q1DEZfD%2BgSsC3XVo%2BeW19yTGP0Nu8DdV2XwoKXzJl6SIpYU4ZFOVaJObF5OyK%2BxSf7lqu4uBBw1Iyh9Eq6ARXyv3c%2BZ3jMwYBUaZPRKGVY%2FSJ748C1D2mOfGpr1EjcOmxG9UWQaHcWqSaC8p6jJZXiB8iuNPzGMpr5cAUpUlCFIey6EyPO59xzAh1sQAQJoasSDU1TSNlwcDZ0UN999jk%2FebgsVlTGoovaCJvSb9y4%2B30UotrjUJgF%2BrEEzTcbCtAe38RZ4lrz%2BUyxEixdRs410%2ByeYrdMBC1o8JgZKjrESzEWs63u1aaQx0vB81t3B4g%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDnExmXC+NqHNDgFhaAE43dibyCRTLwyvweq2spXfoPUHbWVMsxhcK3s8C+69AUjK5h2S1zJrFN+tHtIOP0kNdwUVyzyqhl2b6xwGqULrDXveoKtB6Yl1Z8ZnZsH+cGfJxB/8VtfqmYmWmnyQYSZ0e31nsssNI3vvfMSWTI3fZaAYEi+4bi3zmMYJSybZkePO1wjSc7z3rJqXzvfqUeJhT7q1DEZfD+gSsC3XVo+eW19yTGP0Nu8DdV2XwoKXzJl6SIpYU4ZFOVaJObF5OyK+xSf7lqu4uBBw1Iyh9Eq6ARXyv3c+Z3jMwYBUaZPRKGVY/SJ748C1D2mOfGpr1EjcOmxG9UWQaHcWqSaC8p6jJZXiB8iuNPzGMpr5cAUpUlCFIey6EyPO59xzAh1sQAQJoasSDU1TSNlwcDZ0UN999jk/ebgsVlTGoovaCJvSb9y4+30UotrjUJgF+rEEzTcbCtAe38RZ4lrz+UyxEixdRs410+yeYrdMBC1o8JgZKjrESzEWs63u1aaQx0vB81t3B4g=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    